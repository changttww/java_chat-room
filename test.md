ä»¥ä¸‹æ˜¯ä¸€ä»½æ¶µç›–ä¸Šè¿°åŠŸèƒ½çš„å®Œæ•´ API æ¥å£æ–‡æ¡£ï¼Œæ¶µç›–ç”¨æˆ·ç®¡ç†ã€èŠå¤©å®¤ç®¡ç†ã€æ¶ˆæ¯ç®¡ç†å’ŒåŒæ­¥åŠŸèƒ½ã€‚æ¯ä¸ªæ¥å£éƒ½åŒ…å«æ–¹æ³•ç±»å‹ã€URL è·¯å¾„ã€è¯·æ±‚å‚æ•°ã€å“åº”æ ¼å¼ä»¥åŠåŠŸèƒ½è¯´æ˜ã€‚

---

### **1. ç”¨æˆ·ç®¡ç†æ¨¡å—**

#### **1.1 ç”¨æˆ·æ³¨å†Œ**
- **æ–¹æ³•ç±»å‹ï¼š** POST  
- **æ¥å£è·¯å¾„ï¼š** `/api/users/register`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
    "username": "string",
    "id": int,
    "password": "string"
  }
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Registration successful",
    "data": {
      "uid": "string"
    }
  }
  ```
- **è¯´æ˜ï¼š** åˆ›å»ºæ–°ç”¨æˆ·ï¼Œç”Ÿæˆå”¯ä¸€çš„ UIDã€‚

#### **1.2 ç”¨æˆ·ç™»å½•**
- **æ–¹æ³•ç±»å‹ï¼š** POST  
- **æ¥å£è·¯å¾„ï¼š** `/api/users/login`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
    "username": "string",
    "password": "string"
  }
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Login successful",
    "data": {
      "token": "string"
    }
  }
  ```
- **è¯´æ˜ï¼š** ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œè¿”å› JWT Token ç”¨äºèº«ä»½éªŒè¯ã€‚

#### **1.3 è·å–ç”¨æˆ·ä¿¡æ¯**
- **æ–¹æ³•ç±»å‹ï¼š** GET  
- **æ¥å£è·¯å¾„ï¼š** `/api/users/{uid}`  
- **è¯·æ±‚å‚æ•°ï¼š**
  - Path å‚æ•°ï¼š`uid`ï¼ˆç”¨æˆ·å”¯ä¸€ IDï¼‰
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "User info fetched successfully",
    "data": {
      "uid": "string",
      "username": "string",
      "avatar": "string",
      "friends": ["uid1", "uid2"],
      "blacklist": ["uid3"]
    }
  }
  ```
- **è¯´æ˜ï¼š** æŸ¥è¯¢ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ã€‚

#### **1.4 æ›´æ–°ç”¨æˆ·ä¿¡æ¯**
- **æ–¹æ³•ç±»å‹ï¼š** PUT  
- **æ¥å£è·¯å¾„ï¼š** `/api/users/{uid}`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
    "username": "string",
    "avatar": "string"
  }
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "User info updated successfully"
  }
  ```
- **è¯´æ˜ï¼š** æ›´æ–°ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯ã€‚

#### **1.5 æ›´æ–°é»‘åå•**
- **æ–¹æ³•ç±»å‹ï¼š** PUT  
- **æ¥å£è·¯å¾„ï¼š** `/api/users/{uid}/blacklist`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
    "action": "add/remove",
    "targetUid": "string"
  }
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Blacklist updated successfully"
  }
  ```
- **è¯´æ˜ï¼š** æ·»åŠ æˆ–ç§»é™¤é»‘åå•ã€‚

---

### **2. èŠå¤©å®¤ç®¡ç†æ¨¡å—**

#### **2.1 åˆ›å»ºæˆ¿é—´**
- **æ–¹æ³•ç±»å‹ï¼š** POST  
- **æ¥å£è·¯å¾„ï¼š** `/api/rooms/create`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
  "roomType": "group",        // æˆ¿é—´ç±»å‹ï¼š'public', 'private' æˆ– 'group'
  "roomName": "ç¼–ç¨‹çˆ±å¥½è€…",    // æˆ¿é—´åï¼Œä»…å¯¹ 'public' å’Œ 'group' ç±»å‹æœ‰æ•ˆ
  "ownerUid": 1,              // æˆ¿ä¸»çš„ç”¨æˆ· ID
  "maxMembers": 50,            // æœ€å¤§æˆå‘˜æ•°ï¼Œä»…å¯¹ 'public' å’Œ 'group' ç±»å‹æœ‰æ•ˆ
  "head": ğŸ˜€                 // å¤´åƒï¼Œä»…å¯¹'public'å’Œ 'group'æœ‰æ•ˆ
}
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
{
  "code": 200,
  "message": "Room created successfully",
  "data": {
    "roomId": 1,
    "roomName": "ç¼–ç¨‹çˆ±å¥½è€…",
    "roomType": "group",
    "ownerUid": 1,
    "maxMembers": 50,
    "inviteCode": "x9a2bdf39ef517346aaa6742b2f7796d8",
    "head": "ğŸ‘¨â€ğŸ’»",
    "createdAt": "2024-12-05T12:34:56",
    "updatedAt": "2024-12-05T12:34:56"
  }
}

  ```
- **è¯´æ˜ï¼š** åˆ›å»ºæˆ¿é—´ï¼Œå¹¶è¿”å› Room ID å’Œé‚€è¯·ç ï¼ˆè‹¥ä¸ºç¾¤èŠï¼‰ã€‚

#### **2.2 åŠ å…¥æˆ¿é—´**
- **æ–¹æ³•ç±»å‹ï¼š** POST  
- **æ¥å£è·¯å¾„ï¼š** `/api/rooms/join`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
    "roomId": "string",
    "inviteCode": "string" // ç¾¤èŠæ—¶å¿…å¡«
  }
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Joined room successfully"
  }
  ```
- **è¯´æ˜ï¼š** é€šè¿‡ Room ID æˆ–é‚€è¯·ç åŠ å…¥æˆ¿é—´ã€‚

#### **2.3 æŸ¥è¯¢æˆ¿é—´è¯¦æƒ…**
- **æ–¹æ³•ç±»å‹ï¼š** GET  
- **æ¥å£è·¯å¾„ï¼š** `/api/rooms/{roomId}`  
- **è¯·æ±‚å‚æ•°ï¼š**
  - Path å‚æ•°ï¼š`roomId`ï¼ˆæˆ¿é—´ IDï¼‰
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Room details fetched successfully",
    "data": {
      "roomId": "string",
      "roomType": "public/private/group",
      "ownerUid": "string",
      "members": ["uid1", "uid2"],
      "maxMembers": 10
    }
  }
  ```
- **è¯´æ˜ï¼š** è·å–æˆ¿é—´çš„è¯¦ç»†ä¿¡æ¯ã€‚

---

### **3. æ¶ˆæ¯ç®¡ç†æ¨¡å—**

#### **3.1 å‘é€æ¶ˆæ¯**
- **æ–¹æ³•ç±»å‹ï¼š** POST  
- **æ¥å£è·¯å¾„ï¼š** `/api/messages/send`  
- **è¯·æ±‚å‚æ•°ï¼š**
  ```json
  {
    "roomId": "string",
    "uid": "string",
    "content": "string"
  }
  ```
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Message sent successfully"
  }
  ```
- **è¯´æ˜ï¼š** ç”¨æˆ·åœ¨æŒ‡å®šæˆ¿é—´å‘é€æ¶ˆæ¯ã€‚

#### **3.2 åŒæ­¥æ¶ˆæ¯**
- **æ–¹æ³•ç±»å‹ï¼š** GET  
- **æ¥å£è·¯å¾„ï¼š** `/api/messages/sync`  
- **è¯·æ±‚å‚æ•°ï¼š**
  - Query å‚æ•°ï¼š
    - `roomId`ï¼šæˆ¿é—´ ID
    - `lastTime`ï¼šä¸Šæ¬¡åŒæ­¥çš„æ—¶é—´
- **å“åº”æ ¼å¼ï¼š**
  ```json
  {
    "code": 200,
    "message": "Messages fetched successfully",
    "data": [
      {
        "roomId": "string",
        "uid": "string",
        "content": "string",
        "sendTime": "timestamp"
      }
    ]
  }
  ```
- **è¯´æ˜ï¼š** è¿”å›æŒ‡å®šæˆ¿é—´è‡ª `lastTime` ä»¥æ¥çš„æ‰€æœ‰æ¶ˆæ¯ã€‚

---

### **4. å®æ—¶æ¶ˆæ¯æ¨é€æ¨¡å—**

#### **4.1 å»ºç«‹ WebSocket è¿æ¥**
- **è¿æ¥è·¯å¾„ï¼š** `/ws/chat`  
- **è¯´æ˜ï¼š** å®¢æˆ·ç«¯é€šè¿‡ WebSocket åè®®è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œç”¨äºå®æ—¶æ¥æ”¶æ¶ˆæ¯ã€‚

#### **4.2 æ¶ˆæ¯æ ¼å¼**
- **å‘é€æ ¼å¼ï¼š**
  ```json
  {
    "roomId": "string",
    "uid": "string",
    "content": "string"
  }
  ```
- **æ¥æ”¶æ ¼å¼ï¼š**
  ```json
  {
    "roomId": "string",
    "uid": "string",
    "content": "string",
    "sendTime": "timestamp"
  }
  ```

---

### **5. è¿”å›çŠ¶æ€ç è¯´æ˜**

| çŠ¶æ€ç  | å«ä¹‰                     |
| ------ | ------------------------ |
| 200    | æˆåŠŸ                     |
| 400    | è¯·æ±‚å‚æ•°é”™è¯¯             |
| 401    | æœªæˆæƒ                   |
| 403    | æƒé™ä¸è¶³                 |
| 404    | èµ„æºä¸å­˜åœ¨               |
| 500    | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯           |

---

è¿™ä»½ API æ–‡æ¡£æ¶µç›–äº†èŠå¤©å¹³å°çš„ä¸»è¦åŠŸèƒ½ï¼Œæ‚¨å¯ä»¥æ ¹æ®é¡¹ç›®éœ€æ±‚è¿›ä¸€æ­¥æ‰©å±•å’Œè°ƒæ•´ã€‚æ˜¯å¦éœ€è¦è¡¥å……ç‰¹å®šåŠŸèƒ½çš„å®ç°ç¤ºä¾‹ï¼Ÿ
